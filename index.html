<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qrestige Transcendence | ÙÙ† Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø°ÙƒÙŠØ©</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        :root {
            --brand: #8a2be2; /* Ù„ÙˆÙ† Ø¨Ù†ÙØ³Ø¬ÙŠ Ø¬Ø°Ø§Ø¨ */
            --brand-accent: #00bcd4; /* Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ Ù„Ù„ØªÙˆÙ‡Ø¬ */
            --dark: #0f172a;
            --bg-light: #f0f2f5;
            --bg-dark: #1a1a2e; /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†ÙŠÙˆÙ† */
        }

        /* Ø®Ø· Ø£Ø³Ø§Ø³ÙŠ ÙˆØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù†ØªÙ‚Ø§Ù„ Ù†Ø§Ø¹Ù…Ø© */
        * { box-sizing: border-box; transition: 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); font-family: 'Tajawal', sans-serif !important; }
        
        body { 
            background: var(--bg-light); color: var(--dark); margin: 0; display: flex; height: 100vh; overflow: hidden;
            background-image: radial-gradient(circle at top left, rgba(138, 43, 226, 0.1), transparent 50%),
                              radial-gradient(circle at bottom right, rgba(0, 188, 212, 0.1), transparent 50%);
        }

        /* Sidebar - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø´ÙØ§ÙØ© */
        .sidebar {
            width: 450px; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(25px); /* ØªØ£Ø«ÙŠØ± Ø¶Ø¨Ø§Ø¨ÙŠ */
            border-left: 1px solid rgba(255, 255, 255, 0.3); padding: 30px; 
            display: flex; flex-direction: column; overflow-y: auto; z-index: 100;
            box-shadow: 20px 0 60px rgba(0,0,0,0.08);
        }

        .header { text-align: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid rgba(0,0,0,0.05); }
        .logo { font-weight: 900; font-size: 45px; color: var(--brand); letter-spacing: -2.5px; line-height: 1; text-shadow: 0 0 15px rgba(138, 43, 226, 0.5); }
        .version-tag { font-size: 11px; background: var(--brand-accent); color: white; padding: 4px 12px; border-radius: 20px; vertical-align: middle; margin-right: 10px; font-weight: 700; }

        .section-label { font-size: 13px; font-weight: 800; color: #64748b; text-transform: uppercase; margin: 20px 0 10px; display: flex; align-items: center; gap: 8px; }
        .section-label::after { content: ''; flex: 1; height: 1px; background: rgba(0,0,0,0.08); }

        input:not([type="color"]):not([type="checkbox"]), select {
            width: 100%; padding: 16px; border-radius: 18px; border: 2px solid rgba(0,0,0,0.1); 
            font-size: 16px; outline: none; background: rgba(255,255,255,0.7); color: var(--dark);
        }
        input:focus { border-color: var(--brand); box-shadow: 0 0 0 5px rgba(138, 43, 226, 0.1); }

        /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù†ÙŠÙˆÙ† */
        .color-group { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .color-input-wrapper { display: flex; align-items: center; justify-content: center; border: 2px solid rgba(0,0,0,0.1); border-radius: 18px; padding: 10px; }
        input[type="color"] { width: 40px; height: 40px; border: none; cursor: pointer; background: none; }

        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªÙˆÙ‡Ø¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        .glow-styles-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px; }
        .glow-btn { 
            padding: 12px; border-radius: 15px; border: 2px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.7); 
            text-align: center; font-size: 13px; font-weight: 700; cursor: pointer;
        }
        .glow-btn:hover { border-color: var(--brand-accent); box-shadow: 0 0 15px rgba(0, 188, 212, 0.3); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶ */
        .viewer { flex: 1; display: flex; align-items: center; justify-content: center; position: relative; padding: 40px; }
        
        #canvas-stage {
            background: white; padding: 70px; border-radius: 70px;
            display: flex; flex-direction: column; align-items: center;
            box-shadow: 0 80px 160px rgba(15, 23, 42, 0.15); width: 600px;
            position: relative; border: 2px solid rgba(255,255,255,0.8);
            backdrop-filter: blur(10px); /* Glassmorphism effect */
            background-size: cover; background-position: center; /* Ù„Ø®Ù„ÙÙŠØ§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© */
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªÙˆÙ‡Ø¬ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯ Ù†ÙØ³Ù‡ */
        #qr-wrap.glow { filter: drop-shadow(0 0 10px var(--brand-accent)) drop-shadow(0 0 20px var(--brand)); }

        .qr-label-output { 
            margin-top: 35px; font-size: 40px; font-weight: 900; 
            color: var(--dark); text-align: center; width: 100%;
            word-wrap: break-word; line-height: 1.1; text-shadow: 0 0 5px rgba(0,0,0,0.1);
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
        .actions { margin-top: auto; display: flex; flex-direction: column; gap: 15px; }
        .btn-main { 
            background: linear-gradient(135deg, var(--brand), var(--brand-accent)); 
            color: white; border: none; padding: 22px; border-radius: 20px; 
            font-weight: 900; font-size: 20px; cursor: pointer; 
            box-shadow: 0 12px 30px rgba(138, 43, 226, 0.4); text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .btn-main:hover { transform: translateY(-4px); box-shadow: 0 18px 40px rgba(138, 43, 226, 0.5); }

        .btn-secondary {
            background: rgba(0,0,0,0.05); color: var(--dark); border: 1px solid rgba(0,0,0,0.1); 
            padding: 15px; border-radius: 15px; font-weight: 700; font-size: 16px; cursor: pointer;
        }

        .voice-btn { background: #ff4500; color: white; padding: 12px; border-radius: 12px; margin-top: 10px; font-weight: 700; cursor: pointer; }

        #capture-buffer { position: absolute; left: -9999px; }

        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø®Ù„ÙÙŠØ§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© */
        .bg-gradient { background-image: linear-gradient(to right top, #a21a5a, #4e1952, #18143d, #001228, #000000); }
        .bg-nebula { background-image: url('https://images.unsplash.com/photo-1518384213329-87c2cfc9d64a?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'); background-size: cover; background-position: center; }
        .bg-dots { background-image: radial-gradient(#d3d3d3 1px, transparent 1px), radial-gradient(#d3d3d3 1px, transparent 1px); background-size: 20px 20px; background-position: 0 0, 10px 10px; }

    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="header">
            <div class="logo">Qrestige <span class="version-tag">TRANSCENDENCE</span></div>
            <div style="font-size: 13px; color: #787878; margin-top: 5px;">ÙÙ† Ø§Ù„ÙƒÙˆØ¯ØŒ Ø¨Ø±Ø¤ÙŠØ© Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</div>
        </div>
        
        <div class="section-label">1. Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</div>
        <input type="text" id="qr-data" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø·ØŒ Ø§Ù„Ù†ØµØŒ Ø§Ù„Ø±Ù‚Ù…..." oninput="updateQR()">
        <input type="text" id="qr-text-label" placeholder="Ø§Ù„Ù†Øµ ØªØ­Øª Ø§Ù„ÙƒÙˆØ¯ (Ø§Ù…Ø³Ø­Ù†ÙŠ)" oninput="updateQR()" style="margin-top: 10px;">

        <div class="section-label">2. Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø¶ÙŠØ¦Ø©</div>
        <div class="color-group">
            <div class="color-input-wrapper"><input type="color" id="c1" value="#8a2be2" oninput="updateQR()"><span>Ø§Ù„Ø¨Ø¯Ø¡</span></div>
            <div class="color-input-wrapper"><input type="color" id="c2" value="#00bcd4" oninput="updateQR()"><span>Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</span></div>
        </div>
        <button class="glow-btn" onclick="magicPalette()">âœ¨ Ø§Ù‚ØªØ±Ø§Ø­ Ù„ÙˆØ­Ø© Ø£Ù„ÙˆØ§Ù† Ù…ØªÙˆÙ‡Ø¬Ø©</button>

        <div class="section-label">3. Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</div>
        <div class="glow-styles-grid">
            <button class="glow-btn" onclick="setGlowEffect(true, 'dots', 'extra-rounded')">âœ¨ ØªØ£Ø«ÙŠØ± ØªÙˆÙ‡Ø¬ Ù†ÙŠÙˆÙ†</button>
            <button class="glow-btn" onclick="setGlowEffect(false, 'square', 'dots')">ğŸ§Š Ù†Ù…Ø· Ø²Ø¬Ø§Ø¬ÙŠ Ù‡Ø§Ø¯Ø¦</button>
            <button class="glow-btn" onclick="setGlowEffect(false, 'extra-rounded', 'square')">ğŸŒŸ Ù†Ù…Ø· ÙØ±ÙŠØ¯</button>
        </div>
        
        <div class="section-label">4. Ø§Ù„Ø®Ù„ÙÙŠØ§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©</div>
        <select id="bg-texture" onchange="updateQR()" style="margin-bottom: 15px;">
            <option value="none">Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ (Ø§ÙØªØ±Ø§Ø¶ÙŠ)</option>
            <option value="gradient">ØªØ¯Ø±Ø¬ Ù„ÙˆÙ†ÙŠ Ù…Ø¬Ø±Ø©</option>
            <option value="nebula">Ø³Ø¯ÙŠÙ… ÙƒÙˆÙ†ÙŠ</option>
            <option value="dots">Ù†Ù‚Ø§Ø· Ø´Ø¨ÙƒÙŠØ©</option>
        </select>

        <div class="section-label">5. Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ù„Ø´ÙØ§ÙÙŠØ©</div>
        <input type="file" id="qr-logo" accept="image/*" onchange="updateQR()" style="margin-bottom: 15px;">
        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 15px; font-weight: 700;">
            <input type="checkbox" id="is-trans" onchange="updateQR()"> Ø®Ù„ÙÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ø´ÙØ§ÙØ©
        </label>

        <div class="actions">
            <button class="btn-main" onclick="exportUltimatePNG()">ğŸš€ Ø­ÙØ¸ Ø§Ù„ØªØµÙ…ÙŠÙ… (PNG Ultra HD)</button>
            <button class="btn-secondary" onclick="qr.download({extension:'svg'})">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ SVG</button>
            <button class="voice-btn" style="width: 100%;" disabled>ğŸ™ï¸ Ù…Ø±Ø´Ø¯ ØµÙˆØªÙŠ (Ù‚Ø±ÙŠØ¨Ø§Ù‹)</button>
        </div>
    </aside>

    <main class="viewer">
        <div id="canvas-stage">
            <div id="qr-wrap"></div>
            <div id="label-wrap" class="qr-label-output">Ø§Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯ Ù„ØªØ¬Ø±Ø¨Ø© Ø³Ø­Ø± Qrestige</div>
        </div>
    </main>

    <div id="capture-buffer"></div>

<script>
    const qr = new QRCodeStyling({
        width: 380, height: 380,
        dotsOptions: { type: "extra-rounded" },
        cornersSquareOptions: { type: "extra-rounded" }, // ØªØ®ØµÙŠØµ Ù…Ù†ÙØµÙ„ Ù„Ù„Ø¹ÙŠÙˆÙ†
        backgroundOptions: { color: "#ffffff" },
        imageOptions: { crossOrigin: "anonymous", margin: 10, imageSize: 0.4 }
    });

    qr.append(document.getElementById("qr-wrap"));

    function updateQR() {
        const data = document.getElementById('qr-data').value || "https://qrestige.com/magic";
        const labelText = document.getElementById('qr-text-label').value || "Ø§Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯ Ù„ØªØ¬Ø±Ø¨Ø© Ø³Ø­Ø± Qrestige";
        const c1 = document.getElementById('c1').value;
        const c2 = document.getElementById('c2').value;
        const isTransparent = document.getElementById('is-trans').checked;
        const logoFile = document.getElementById('qr-logo').files[0];
        const bgTexture = document.getElementById('bg-texture').value;

        const labelElement = document.getElementById('label-wrap');
        const stageElement = document.getElementById('canvas-stage');
        const qrWrapElement = document.getElementById('qr-wrap');

        labelElement.innerText = labelText;
        labelElement.style.color = c1; // Ø§Ù„Ù†Øµ ÙŠØ£Ø®Ø° Ù„ÙˆÙ† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ù„ÙÙŠØ§Øª Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
        stageElement.className = ''; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
        if (bgTexture === 'gradient') stageElement.classList.add('bg-gradient');
        else if (bgTexture === 'nebula') stageElement.classList.add('bg-nebula');
        else if (bgTexture === 'dots') stageElement.classList.add('bg-dots');
        else stageElement.style.backgroundImage = 'none'; // Ù…Ø³Ø­ Ø¥Ø°Ø§ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø®ØªÙŠØ§Ø±

        stageElement.style.background = isTransparent ? 'transparent' : 'white'; // Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù„Ø¥Ø·Ø§Ø± Ø§Ù„ÙƒÙˆØ¯

        qr.update({
            data: data,
            dotsOptions: { gradient: { type: "linear", colorStops: [{ offset: 0, color: c1 }, { offset: 1, color: c2 }] } },
            cornersSquareOptions: { color: c1 }, // Ø¹ÙŠÙˆÙ† Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†ÙØ³ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
            backgroundOptions: { color: isTransparent ? "transparent" : "#ffffff" }
        });

        if (logoFile) {
            const reader = new FileReader();
            reader.onload = (e) => qr.update({ image: e.target.result });
            reader.readAsDataURL(logoFile);
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø©
        localStorage.setItem('qrestige_session', JSON.stringify({ data, labelText, c1, c2, isTransparent, bgTexture }));
    }

    // AI-Driven Visualizer: Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØªÙˆÙ‡Ø¬ ÙˆØ§Ù„Ø²Ø¬Ø§Ø¬
    function setGlowEffect(applyGlow, dotType, cornersType) {
        const qrWrapElement = document.getElementById('qr-wrap');
        if (applyGlow) {
            qrWrapElement.classList.add('glow');
            document.documentElement.style.setProperty('--brand-accent', document.getElementById('c2').value); // Ù„ÙˆÙ† Ø§Ù„ØªÙˆÙ‡Ø¬ Ù…Ù† Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ
            document.documentElement.style.setProperty('--brand', document.getElementById('c1').value); // Ù„ÙˆÙ† Ø§Ù„ØªÙˆÙ‡Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        } else {
            qrWrapElement.classList.remove('glow');
        }

        qr.update({
            dotsOptions: { type: dotType },
            cornersSquareOptions: { type: cornersType }
        });
        updateQR(); // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ù…Ù„
    }

    // AI-Driven Visualizer: Ø§Ù‚ØªØ±Ø§Ø­ Ù„ÙˆØ­Ø© Ø£Ù„ÙˆØ§Ù† Ù…ØªÙˆÙ‡Ø¬Ø©
    function magicPalette() {
        const palettes = [
            ['#ee0979', '#ff6a00'], // Fire Sunset
            ['#00c6ff', '#0072ff'], // Deep Ocean
            ['#d400d4', '#ff007f'], // Cyber Punk
            ['#00f260', '#0575e6'], // Forest Stream
            ['#ff7e5f', '#feb47b']  // Vibrant Coral
        ];
        const pick = palettes[Math.floor(Math.random() * palettes.length)];
        document.getElementById('c1').value = pick[0];
        document.getElementById('c2').value = pick[1];
        updateQR();
    }

    // ØªØµØ¯ÙŠØ± ÙØ§Ø¦Ù‚ Ø§Ù„Ø¯Ù‚Ø©
    async function exportUltimatePNG() {
        const original = document.getElementById('canvas-stage');
        const buffer = document.getElementById('capture-buffer');
        buffer.innerHTML = "";
        const clone = original.cloneNode(true);
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø§Øµ Ù„Ù„ÙƒÙ„ÙˆÙ† Ù„Ø¶Ù…Ø§Ù† Ø£ÙØ¶Ù„ Ø¬ÙˆØ¯Ø©
        clone.style.width = "800px"; 
        clone.style.transform = "none";
        clone.style.borderRadius = "80px"; // Ø²ÙŠØ§Ø¯Ø© Ø­Ø¯Ø© Ø§Ù„Ø­ÙˆØ§Ù
        clone.style.padding = "80px";
        buffer.appendChild(clone);

        setTimeout(async () => {
            const canvas = await html2canvas(clone, { scale: 5, backgroundColor: null, useCORS: true, logging: false }); // Ø¯Ù‚Ø© 5x Ù„Ù€ 4K+
            const link = document.createElement('a');
            link.download = `Qrestige_Transcendence_${Date.now()}.png`;
            link.href = canvas.toDataURL("image/png");
            link.click();
            buffer.innerHTML = "";
        }, 300); // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆÙ‚Øª Ù‚Ù„ÙŠÙ„Ø§ Ù„Ø¶Ù…Ø§Ù† Ø±Ù†Ø¯Ø± ÙƒØ§Ù…Ù„ Ù„Ù„ØªØ£Ø«ÙŠØ±Ø§Øª
    }

    // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø©
    window.onload = () => {
        const saved = localStorage.getItem('qrestige_session');
        if (saved) {
            const { data, labelText, c1, c2, isTransparent, bgTexture } = JSON.parse(saved);
            document.getElementById('qr-data').value = data;
            document.getElementById('qr-text-label').value = labelText;
            document.getElementById('c1').value = c1;
            document.getElementById('c2').value = c2;
            document.getElementById('is-trans').checked = isTransparent;
            document.getElementById('bg-texture').value = bgTexture;
        }
        updateQR();
    };
</script>
</body>
</html>
