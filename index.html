<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Qrestige PRO Ultimate – عربي UI/UX احترافي</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
:root{
--dark-bg:#1E1E2F; --dark-panel:#28293D; --accent:#7C7CFF; --safeZoneColor:rgba(255,111,97,0.5);
--light-bg:#F5F5F5; --light-panel:#FFFFFF; --text-dark:#1E1E2F; --text-light:#FFFFFF;
}
*{box-sizing:border-box;font-family:'Tajawal',sans-serif;margin:0;padding:0;}
body{display:flex;height:100vh;transition:.3s;}
aside{width:400px;padding:25px;overflow:auto;background:var(--dark-panel);display:flex;flex-direction:column;gap:15px;transition:.3s;}
aside h2{text-align:center;font-weight:900;margin-bottom:15px;color:var(--text-light);}
main{flex:1;display:flex;justify-content:center;align-items:center;transition:.3s;background:var(--dark-bg);}
.stage{width:360px;height:360px;background:#111;border-radius:20px;box-shadow:0 30px 80px rgba(0,0,0,.6);position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:.3s;}
.stage.transparent{background:none;box-shadow:none;padding:0;}
#safeZone{position:absolute;border:2px dashed var(--safeZoneColor);border-radius:50%;pointer-events:none;display:none;}
.caption{text-align:center;margin-top:16px;font-weight:900;font-size:22px;color:var(--text-light);}
.tabs{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:10px;}
.tab{flex:1;padding:10px;background:#2a2d3d;color:#fff;text-align:center;cursor:pointer;border-radius:8px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:5px;transition:.3s;}
.tab.active{background:var(--accent);}
.tab:hover{opacity:.9;}
.tab-content{display:none;flex-direction:column;gap:12px;}
.tab-content.active{display:flex;}
input,select,button{padding:10px;border-radius:8px;border:none;font-family:inherit;transition:.3s;}
input[type=color]{padding:3px;height:38px;}
button{background:var(--accent);color:#fff;font-weight:700;cursor:pointer;}
button:hover{opacity:.9;}
button.secondary{background:#2a2d3d;}
.slider-container{display:flex;align-items:center;gap:10px;}
.slider-container input{flex:1;}
.template-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}
.template-grid button{padding:12px;background:#2a2d3d;color:#fff;border-radius:12px;font-weight:700;transition:.3s;}
.template-grid button:hover{background:var(--accent);}
body.light main{background:radial-gradient(circle,rgba(0,0,0,.05) 1px,transparent 1px);background-size:18px 18px;}
body.light .stage{background:#fff;box-shadow:0 30px 80px rgba(0,0,0,.2);}
body.light .caption{color:var(--text-dark);}
body.light aside{background:var(--light-panel);}
body.light .tab{background:#ccc;color:var(--text-dark);}
body.light .tab.active{background:var(--accent);color:#fff;}
</style>
</head>
<body class="dark">

<aside>
<h2>كيو بريستيج PRO</h2>
<div class="tabs">
<div class="tab active" data-tab="content">المحتوى</div>
<div class="tab" data-tab="style">التصميم</div>
<div class="tab" data-tab="logo">الشعار</div>
<div class="tab" data-tab="templates">القوالب</div>
<div class="tab" data-tab="export">التصدير</div>
</div>

<!-- Content -->
<div id="content" class="tab-content active">
<label>رابط / نص QR</label><input id="data" value="https://example.com">
<label>النص السفلي</label><input id="caption" value="امسح هنا">
</div>

<!-- Style -->
<div id="style" class="tab-content">
<label>لون التدرج البداية</label><input type="color" id="c1" value="#000000">
<label>لون التدرج النهاية</label><input type="color" id="c2" value="#7C7CFF">
<label>مستوى تصحيح الخطأ</label>
<select id="error">
<option value="L">L</option><option value="M">M</option>
<option value="Q">Q</option><option value="H" selected>H</option>
</select>
<div class="slider-container">
<label>الهامش</label><input type="range" id="margin" min="0" max="20" value="6">
<span id="marginVal">6</span>
</div>
<label><input type="checkbox" id="transparent"> الشفافية المطلقة</label>
<label><input type="checkbox" id="safe"> منطقة الأمان للشعار</label>
<label><input type="checkbox" id="themeSwitch"> الوضع الفاتح</label>
</div>

<!-- Logo -->
<div id="logo" class="tab-content">
<label>اختر شعار</label><input type="file" id="logoInput">
<div class="slider-container">
<label>حجم الشعار (%)</label><input type="range" id="logoSize" min="10" max="40" value="25">
<span id="logoVal">25</span>
</div>
</div>

<!-- Templates -->
<div id="templates" class="tab-content">
<div class="template-grid">
<button onclick="applyTemplate('corporate')">قالب رسمي</button>
<button onclick="applyTemplate('event')">قالب فعالية</button>
<button onclick="applyTemplate('minimal')">قالب حديث</button>
<button onclick="applyTemplate('luxury')">قالب فاخر</button>
<button onclick="applyTemplate('tech')">قالب تقني</button>
</div>
</div>

<!-- Export -->
<div id="export" class="tab-content">
<button onclick="savePreset()">حفظ الإعدادات</button>
<button class="secondary" onclick="loadPreset()">تحميل الإعدادات</button>
<button onclick="exportPNG()">تصدير PNG</button>
<button onclick="exportPDF()">تصدير PDF</button>
<button onclick="exportSVG()">تصدير SVG</button>
</div>
</aside>

<main>
<div class="stage" id="stage">
<div id="qr"></div>
<div id="safeZone"></div>
<div class="caption" id="cap">امسح هنا</div>
</div>
</main>

<script>
let logoData=null;
const qr=new QRCodeStyling({
width:360,height:360,type:"canvas",
dotsOptions:{type:"extra-rounded"},
backgroundOptions:{color:"transparent"}
});
qr.append(document.getElementById("qr"));

// Templates
const templates={
corporate:{c1:'#1E1E2F',c2:'#7C7CFF',caption:'امسح هنا',error:'H',margin:6,logoSize:25},
event:{c1:'#FF4D4D',c2:'#FFCC00',caption:'فعالية اليوم',error:'Q',margin:6,logoSize:30},
minimal:{c1:'#555555',c2:'#AAAAAA',caption:'مسح سريع',error:'M',margin:4,logoSize:20},
luxury:{c1:'#FFD700',c2:'#8B0000',caption:'فاخر',error:'H',margin:6,logoSize:25},
tech:{c1:'#00D8FF',c2:'#0044FF',caption:'Tech QR',error:'Q',margin:6,logoSize:25}
};

function applyTemplate(name){
const t=templates[name];
c1.value=t.c1;c2.value=t.c2;caption.value=t.caption;error.value=t.error;margin.value=t.margin;logoSize.value=t.logoSize;
update();
}

// Update Stage
function update(){
qr.update({
data:data.value,
image:logoData,
imageOptions:{imageSize:logoSize.value/100,margin:margin.value},
qrOptions:{errorCorrectionLevel:error.value},
dotsOptions:{gradient:{type:"linear",colorStops:[{offset:0,color:c1.value},{offset:1,color:c2.value}]}}
});
cap.textContent=caption.value;
cap.style.color=c1.value;
stage.classList.toggle("transparent",transparent.checked);
document.getElementById("safeZone").style.display=safe.checked?'block':'none';
document.getElementById("marginVal").textContent=margin.value;
document.getElementById("logoVal").textContent=logoSize.value;
}

// Tabs
document.querySelectorAll(".tab").forEach(tab=>{
tab.onclick=()=>{
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
document.querySelectorAll(".tab-content").forEach(c=>c.classList.remove("active"));
tab.classList.add("active");
document.getElementById(tab.dataset.tab).classList.add("active");
};
});

// Inputs
document.querySelectorAll("input,select").forEach(e=>e.oninput=update);

// Logo upload
logoInput.onchange=e=>{
const r=new FileReader();
r.onload=()=>{logoData=r.result;update();}
r.readAsDataURL(e.target.files[0]);
};

// Presets
function savePreset(){localStorage.qrestige=JSON.stringify({data:data.value,caption:caption.value,c1:c1.value,c2:c2.value,logoSize:logoSize.value,error:error.value,margin:margin.value});alert("تم حفظ الإعدادات");}
function loadPreset(){const p=JSON.parse(localStorage.qrestige||"{}");if(!p) return;data.value=p.data||data.value;caption.value=p.caption||caption.value;c1.value=p.c1||c1.value;c2.value=p.c2||c2.value;logoSize.value=p.logoSize||logoSize.value;error.value=p.error||error.value;margin.value=p.margin||margin.value;update();}

// Theme
themeSwitch.onchange=()=>{document.body.classList.toggle("light",themeSwitch.checked);main.classList.toggle("light",themeSwitch.checked);stage.classList.toggle("light",themeSwitch.checked);cap.classList.toggle("light",themeSwitch.checked);};

// Export
async function exportPNG(){const c=await html2canvas(stage,{scale:3,backgroundColor:null});download(c.toDataURL(),"qrestige.png");}
async function exportPDF(){const c=await html2canvas(stage,{scale:4,backgroundColor:null});const pdf=new jspdf.jsPDF({unit:"px",format:[c.width,c.height]});pdf.addImage(c.toDataURL(),"PNG",0,0);pdf.save("qrestige.pdf");}
function exportSVG(){qr.download({extension:"svg",name:"qrestige"});}
function download(h,name){const a=document.createElement("a");a.href=h;a.download=name;a.click();}

// Initialize
update();
</script>

</body>
</html>
